# 文件分享系统

这是一个基于Flask的文件分享系统，允许用户通过提取码上传和下载文件。系统包含管理员后台，用于管理文件和查看统计信息。

## 功能特性

- **文件上传与分享**：
  - 生成唯一提取码
  - 设置文件有效期和最大下载次数
  - 文件类型限制
  - 文件去重（基于MD5）

- **安全防护**：
  - 提取码爆破防护
  - 下载频率限制
  - 管理员登录保护
  - 会话超时管理

- **管理员功能**：
  - 文件管理（查看/删除/禁用）
  - 系统统计信息
  - 搜索功能
  - 下载记录查看

- **其他特性**：
  - 自动清理过期文件
  - 响应式错误页面
  - 日志记录

## 安装与运行

### 环境要求

- Python 3.7+
- Flask及相关依赖
- SQLite（或其他支持的数据库）

### 安装步骤

1. 克隆仓库：
   ```bash
   git clone [仓库地址]
   cd [项目目录]
   ```

2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

3. 配置：
   - 根据需求修改配置参数`config.py`

4. 初始化数据库：
   ```bash
   flask init-db
   ```

5. 运行应用：
   ```bash
   python app.py
   ```

## 使用说明

### 普通用户

1. 访问首页
2. 输入管理员提供的提取码下载文件

### 管理员

1. 访问`/admin/login`登录
2. 主要功能：
   - **添加文件**：上传新文件并设置参数
   - **文件管理**：查看、搜索、删除或禁用文件
   - **统计信息**：查看系统使用情况
   - **记录查看**：查看文件下载记录

## 配置选项

主要配置参数（详见`config.py`）：

- `SECRET_KEY`: 应用密钥
- `UPLOAD_FOLDER`: 文件上传目录
- `ALLOWED_EXTENSIONS`: 允许的文件类型
- `DEFAULT_EXPIRE_DAYS`: 默认文件有效期
- `RATE_LIMIT_DEFAULT`: 默认请求限制
- `ADMIN_PASSWORD`: 管理员密码
- `ADMIN_SESSION_TIMEOUT`: 管理员会话超时时间

## 维护命令

- 清理过期文件和记录：
  ```bash
  flask cleanup
  ```


## 安全建议

1. 生产环境务必修改默认密码
2. 定期备份数据库
3. 考虑使用Nginx等反向代理
4. 监控系统日志

## 许可证

[MIT License](LICENSE)